# CellSoup
A simulator of cell life in the hexagonal world. This application is designed to simulate cell effusion. Each cell has its own genome, working on the principle of assembly instructions, copied to the descendant during mitosis. Natural selection is based on the fact that cells with the most successful genome in the given conditions have a greater chance of survival.

CellSoup - проект, созданный по мотивам "Искусственной жизни" foo52ru (youtube)
Суть работы:
Есть поле, на поле есть клетки. У каждой клетки есть следующие характеристики:
- energy - к-во энергии клетки. Энергия ратится на каждое действие. Когда энергия дотигает 0, клетка погибает
- DNA - набор из 64 integer, каждый из которых принимает значения от 0 до 63. Фактически, программа поведения клетки.
- meat - сколько раз клетка поедала труп или другую клетку
- sun - сколько раз клетка фотосинтещировала
- minerals - сколько раз клетка усваивала минералы
- craw - текщий запас минералов клетки
- fenotype - абор из 8 integer, каждый из которых принимает значения от 0 до 64. эквивалент "внешних черт" клетки.

Клетки существуют бесцельно, отбор происходит по принципу "выжил - не выжил". Клетки существуют в поле из 6-гранных тайлов. 
Каждый тайл имеет следующие характеристики:
- sun_lvl - эффективность фотосинтеза на данном тайле
- mineral_lvl - эффективность добычи минералов на данном тайле
- radiation_lvl - вероятность мутации клетки при размножении

Количество ресурсов и уровень радиации изменяются по принципу f(x)*max_lvl. В данном проекте х - это номер строки, на которой расположен тайл. f(x) - косинус, соответственно, на верхней строке поля количество ресурса максимальное, и уровень радиации максимальный. При этом, в середине поля нет ни ресурсов, ни значительной радиации, а внизу поля ресурсов максимум, и радиации максимум.
В верхней половине поля из ресурсов присутствует только солнечный свет, а в нижней - только минералы. 
Поле замкнуто по бокам - при выходе а правую или левую границу, клетка появляется с противоположной стороны поля. И поле ограничено сверху и снизу непрницаемой стеной. 

Ореинация в поле: существуют абсолютное и относительное направления. Абсолютное отражено в интерфейсе. 0 означает, что клетка "смотрит" вправо, 1 - вправо-вверх и т.д. против часовой. 
Относительное направление используетсяв командах генома. Если указан относительный поворот на некоторое количество пунктов, это означает, что конечное направление клетки будет "начальное_абсолютное_значение" + "относительное" % 6. 
Фраза "тайл перед клеткой" или "клетка перед активной клеткой" подразумевает обращение к соседнему тайлу/клетке в относительном направлении 0.

ИИ клетки состоит из базовых команд, отвечающих за определнное простое действие: атака, движение, фотосинтез и т.п.
Каждая команда обозначается номером от 0 до 19. Некоторые номера не обознаяают никаких команд. Такие команды предназначены для организации "простоя" клетки.
У каждой клетки существует индивидуальный линковщик. Это массив из 64 чисел от 0 до 19, которые ссылаются на соответствующие команды.
У каждой клетки существует индивидуальный ДНК, состоящий из 64 чисел от 0 до 63. Он ссылается на линковщик.
Механизм действия клетки:
- Считать из p_ctr - счётчика команд, номер исполняемого гена.
- Из гена с нужным номером считать индекс исполняемой команды в линковщике.
- Выполнить команду.

При делении клетки, новая клетка получает геном и линковщик материнской клетки. С вероятностью, равной уровню радиации в тайле, клетка получает мутацию - случайный ген изменяется на случайное значение. 
Если произошла мутация генома, то с веротностью 2/3 от уровня радиации в тайле происходит мутация линковщика - случайное значение изменяется на случайную величину.

Такой механизм генома - первый шаг к возможности клеток вырабатывать "специализацию" - невозможность выполнять некоторые функции.

Интерфейс:
Кнопки:
Start - запуск симуляции. Работает только если поле не пустое
Stop - остановка симуляции. 
One step - шаг симуляции. Работает только если поле не пустое
Make life - заполнить поле клетками, каждая - со случайным геномом. Плотность заполнения - 30%. Работае только если поле пустое
Clean field - Очистить поле. Останавливает симуляцию и уничтожает все клетки.
Change mode - смена режима отображения. Реализованные режимы отображения:
	- режим энергии: чёрный - пустой тайл, серый - труп клетки, градация от синего до прпурного - клетка. Чем более пурпурная клетка, тем больше у неё энергии.
	- Режим рациона: пустой и светло-серый - то же. Цвет клеток изменяется в зависимости от приоритета питания. Чем больше клетка фотосинтезировала, тем она зеленее, чем больше поглотила минералов, тем синее, чем больше охотилась, тем краснее.

Текстовые поля:
Для активации поля - левый клик мышью, для деактивации - левый клик мышью мимо поля. (присутствует баг поведения поля при клике мышью по активному полю)
Изменение значения поля применяется при деактивации. 

Sun lvl - максимальный уровень освещённости тайла
mineral lvl - максимальная насыщенность тайла минералами
radiation lvl - максимальная радиация
season duration - длительность одного сезона в шагах симуляции
Summer factor - Коэффициент, изменяющий количество еды летом (0 сезон)
Autumn factor - к-т, изменяющийкол-во еды осенью (1 сезон)
 и т.п.
